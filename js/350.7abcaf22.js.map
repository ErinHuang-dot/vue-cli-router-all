{"version":3,"file":"js/350.7abcaf22.js","mappings":"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","sources":["webpack://router/./src/views/CartView.vue","webpack://router/./src/views/CartView.vue?73a2"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <loading :active=\"isLoading\"></loading>\r\n    <h2 class=\"my-4\">購物車列表</h2>\r\n    <div class=\"mt-4 mb-5\">\r\n      <table class=\"table align-middle\">\r\n        <thead>\r\n          <tr>\r\n            <th scope=\"col\" class=\"\">圖片</th>\r\n            <th scope=\"col\" class=\"\">商品名稱</th>\r\n            <th scope=\"col\">價格</th>\r\n            <th scope=\"col\" class=\"\"></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"item in products\" :key=\"item.id\">\r\n            <td class=\"w-25\">\r\n              <img class=\"w-100\" :src=\"item.imageUrl\" :alt=\"item.title\" />\r\n            </td>\r\n            <td>{{ item.title }}</td>\r\n            <td>\r\n              <div v-if=\"item.origin_price === item.price\">\r\n                {{ item.origin_price }} 元\r\n              </div>\r\n              <div v-else>\r\n                <del>原價 {{ item.origin_price }} 元</del><br />\r\n                <span class=\"fs-5\">現在只要 {{ item.price }} 元</span>\r\n              </div>\r\n            </td>\r\n            <td>\r\n              <div class=\"btn-group\" role=\"group\">\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-outline-secondary btn-sm border-end-0\"\r\n                  @click=\"openProductModal(item.id)\"\r\n                  :disabled=\"isLoadingItem === item.id\"\r\n                >\r\n                  查看更多\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-outline-danger btn-sm\"\r\n                  @click=\"addToCart(item.id)\"\r\n                  :disabled=\"isLoadingItem === item.id\"\r\n                >\r\n                  <span\r\n                    class=\"spinner-border spinner-border-sm\"\r\n                    v-show=\"isLoadingItem === item.id\"\r\n                  ></span>\r\n                  加到購物車\r\n                </button>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      products: {},\r\n      cartData: {},\r\n      isLoadingItem: '', // 用是否正在載入，來改變按鈕的點擊狀態\r\n      isLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    getProducts () {\r\n      const getProductsApi = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.isLoading = true\r\n      this.$http\r\n        .get(getProductsApi)\r\n        .then((res) => {\r\n          this.isLoading = false\r\n          this.products = res.data.products\r\n        })\r\n        .catch((error) => {\r\n          console.dir(error)\r\n          alert(`喔...${error}...，暫時無法取得商品資料，請稍候再試`)\r\n        })\r\n    },\r\n    addToCart (id, qty = 1) { // 預設商品數量為1\r\n      const data = {\r\n        product_id: id,\r\n        qty\r\n      }\r\n      this.isLoadingItem = id // 觸發時也存取id\r\n\r\n      this.$http.post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`, { data }) // 需帶入商品資料\r\n        .then((res) => {\r\n          this.getCartData()\r\n          this.$refs.moreModal.closeModal()\r\n          this.isLoadingItem = '' // 觸發後清空id\r\n        })\r\n        .catch((error) => {\r\n          window.alert(error.data.data.message)\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getProducts()\r\n  }\r\n}\r\n\r\n</script>\r\n","import { render } from \"./CartView.vue?vue&type=template&id=676198e3\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\_Front_end\\\\_Hexschool_Vue\\\\router\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","scope","role","_createElementBlock","_createVNode","_component_loading","active","$data","_hoisted_2","_hoisted_5","_Fragment","_renderList","item","key","id","src","imageUrl","alt","title","_toDisplayString","origin_price","price","_hoisted_8","_hoisted_9","_hoisted_10","type","onClick","_ctx","disabled","_hoisted_13","$options","data","products","cartData","isLoadingItem","isLoading","methods","getProducts","getProductsApi","this","$http","get","then","res","catch","error","console","dir","alert","addToCart","qty","product_id","post","getCartData","$refs","moreModal","closeModal","window","message","mounted","__exports__","render"],"sourceRoot":""}